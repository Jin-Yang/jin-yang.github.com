<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
  <meta name="baidu-site-verification" content="B786jeR0MV" />
  <meta name="msvalidate.01" content="29F791E7F785800340E37AD7C714D2A7" />
  <meta name="google-site-verification" content="p7jJ5d3kF9yxRhpIo5GgHXAZ1ATKVyZhV2kf6mEGOv0" />
  <title>ICMP Ping|JinYang's Blog</title>
  <meta name="keywords" content="network,icmp,ping">
  <meta name="description" content="">

  <script src="https://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
  <script type="text/javascript">
  !window.jQuery && document.write('<script src="/static/js/jquery.min.js"><\/script>');
  </script>
  <script src="https://cdn.bootcss.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
  <script type="text/javascript">
  !$('body').popover && document.write('<script src="/static/js/bootstrap.min.js"><\/script>');
  </script>
  <script type="text/javascript" src="/static/js/main.js"></script>
  <!-- <link rel="stylesheet prefetch" href="http://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css"> -->
  <link type="text/css" rel="stylesheet prefetch" href="/static/css/bootstrap.min.css">
  <!-- <link href="http://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"> -->
  <link type="text/css" rel="stylesheet prefetch" href="/static/css/font-awesome.min.css">
  <link type="text/css" rel="stylesheet prefetch" href="/static/css/pygments.css">
  <link type="text/css" rel="stylesheet prefetch" href="/static/css/screen.css">
  <style type="text/css">
  
    .post-container > p {text-indent: 2em;}
  
  </style>
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-124556620-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-124556620-1');
</script>

</head>

<body>
<nav class="navbar navbar-default navbar-inverse navbar-fixed-top navbar-wrapper">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
      </button><a class="navbar-brand" href="/">Jin-Yang</a>
    </div>
    <div id="navbar" class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        <li  ><a href="/"> Home </a></li>
        <li  ><a href="/archives.html"> Archive </a></li>
        <li  ><a href="/categories.html"> Categories </a></li>
        <li  ><a href="/projects.html"> Projects </a></li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> Others <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li class="dropdown-header">常用网站</li>
            <li role="separator" class="divider"></li>
            <li><a href="https://www.rtems.org/">www.rtems.org</a></li>
            <li><a href="http://www.gnu.org/">www.gnu.org</a></li>
            <li><a href="https://www.kernel.org/">www.kernel.org</a></li>
            <li><a href="https://www.arduino.cc/">www.arduino.cc</a></li>
          </ul>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li  ><a href="/about.html"> About </a></li>
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</nav>

<div id="myCarousel" class="carousel slide" data-ride="carousel">
  <!-- Indicators -->
  <ol class="carousel-indicators">
    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
    <li data-target="#myCarousel" data-slide-to="1"></li>
    <li data-target="#myCarousel" data-slide-to="2"></li>
    <li data-target="#myCarousel" data-slide-to="3"></li>
    <li data-target="#myCarousel" data-slide-to="4"></li>
  </ol>
  <div class="carousel-inner" role="listbox">
    <div class="item active">
      <img src="data:image/gif;base64,R0lGODlhAQABAIAAAGZmZgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" alt="Second slide">
      <div class="container">
        <div class="carousel-caption">
          <h1>KISS</h1>
          <h2>Keep It Simple and Stupid.</h2>
          <!--<a class="btn btn-lg btn-primary" href="#" role="button">Sign up today</a>-->
        </div>
      </div>
    </div>
    <div class="item">
      <img src="data:image/gif;base64,R0lGODlhAQABAIAAAGZmZgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" alt="Second slide">
      <div class="container">
        <div class="carousel-caption">
          <h1>Seize The Day</h1><h1>And Get Busy Living</h1>
        </div>
      </div>
    </div>
    <div class="item">
      <img src="data:image/gif;base64,R0lGODlhAQABAIAAAGZmZgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" alt="Second slide">
      <div class="container">
        <div class="carousel-caption">
          <h1>Stay hungry</h1><h1>Stay foolish</h1>
        </div>
      </div>
    </div>
    <div class="item">
      <img src="data:image/gif;base64,R0lGODlhAQABAIAAAGZmZgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" alt="Second slide">
      <div class="container">
        <div class="carousel-caption">
	  <h2>Ever tried, ever failed</h2><h2>No matter, try again</h2><h2>Fail again, fail better</h2>
        </div>
      </div>
    </div>
    <div class="item">
      <img src="data:image/gif;base64,R0lGODlhAQABAIAAAGZmZgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" alt="Second slide">
      <div class="container">
        <div class="carousel-caption">
          <h1>Nothing is true</h1><h1>Every is permitted</h1>
        </div>
      </div>
    </div>
  </div>
  <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
    <span class="glyphicon glyphicon-chevron-left"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
    <span class="glyphicon glyphicon-chevron-right"></span>
    <span class="sr-only">Next</span>
  </a>
</div><!-- /.carousel -->

<div class="container">
  <div class="row">
    <div class="col-lg-9 blog-main" style="min-width: 500px">
    
<div class="post-container">
  <div class="blog-header">
    <h1>ICMP Ping</h1>
    <div class="post-description">
      <i class="fa fa-calendar"></i> 2018-04-02 Monday &nbsp; &nbsp;
      <i class="fa fa-tags"></i>  network  
      
    </div>
  </div>
  <hr>
  <p>Internet Control Message Protocol, ICMP(RFC-792) 基于 IP 协议，工作在七层协议的第三层，主要用来解析网络路由情况，通过返回错误信息进行分析定位。</p>

<!-- more -->

<!--
![nmap logo](/images/network/nmap-logo.jpg "nmap logo"){: .pull-center width="50%" }









## struct msghdr

常用于 socket 的发送接收消息，函数声明如下。

#include <sys/types.h>
#include <sys/socket.h>

ssize_t sendmsg(int sockfd, const struct msghdr *msg, int flags);
ssize_t recvmsg(int sockfd, struct msghdr *msg, int flags);

#include <sys/socket.h>

struct iovec {                   /* Scatter/gather array items */
   void  *iov_base;              /* Starting address */
   size_t iov_len;               /* Number of bytes to transfer */
};

struct msghdr {
   void         *msg_name;       /* optional address */
   socklen_t     msg_namelen;    /* size of address */
   struct iovec *msg_iov;        /* scatter/gather array */
   size_t        msg_iovlen;     /* # elements in msg_iov */
   void         *msg_control;    /* ancillary data, see below */
   size_t        msg_controllen; /* ancillary data buffer len */
   int           msg_flags;      /* flags on received message */
};

看起来比较复杂，实际上结构成员可以分为四组：

* 套接口地址成员 msg_name 与 msg_namelen；
* IO向量引用 msg_iov 与 msg_iovlen；
* 附属数据缓冲区成员 msg_control 与 msg_controllen；
* 接收信息标记位 msg_flags，详细可以查看 man 手册。

其中 msg_control 指向的是一个 struct cmsghdr 结构体。

https://blog.csdn.net/u014209688/article/details/71311973
https://www.cnblogs.com/jimodetiantang/p/9190958.html
https://ivanzz1001.github.io/records/post/linux/2017/11/04/linux-msghdr



GitHub 上不错的Hack技巧
ICMP Tunnel

### Socket 缓冲区

Linux 中可以设置 socket 缓冲区的大小，貌似对于 RAW_SOCKET 和 TCP 等都有效，没有从代码上确认。

在使用 RAW_SOCKET 时，例如发送 ICMP 报文，因为不存在 TCP 中的滑动窗口、限流等机制，在流量过大时极易引起报文在缓冲区的静默丢失。此时可以通过 tcpdum 获取，但是通过 read、recvmsg 等系统接口无法接收到数据。

接收缓冲区的大小可以使用 `setsockopt()` 设置 `SO_RCVBUF` 选项，其默认和最大值可以通过如下命令查看。

$ cat /proc/sys/net/core/rmem_default
$ cat /proc/sys/net/core/rmem_max

$ cat /proc/sys/net/core/wmem_default
$ cat /proc/sys/net/core/wmem_max

在设置 Socket 的时候，如果期望设置的缓存大于上述的 max ，实际上会得到两倍于 max 值。

### TCP 缓冲区

其中 TCP 的读写缓存可以通过如下方式查看，因为可以通过协议自身可以进行限流，那么由于缓存不足导致丢包的概率极小，只是效率问题：

$ cat /proc/sys/net/ipv4/tcp_rmem
4096	87380	   6291456
4*1024  85*1024    6*1024*1024

$ cat /proc/sys/net/ipv4/tcp_wmem
4096	16384	   4194304
4*1024  16*1024    4*1024*1024

$ cat /proc/sys/net/ipv4/tcp_mem
88371	117831	176742


其中对应了三个数值，分别为最小、默认、最大值。

##

在大多数的 Linux 中 rmem_max 和 wmem_max 被分配的值为 128 k，在一个低延迟的网络环境中，一般是足够用的，对于负载和延迟较高的网络，就需要调整内存使用方法。

详细可以参考
https://segmentfault.com/a/1190000000473365
https://my.oschina.net/guol/blog/115837

https://jvns.ca/blog/2016/08/24/find-out-where-youre-dropping-packets/
https://jvns.ca/blog/2017/09/05/finding-out-where-packets-are-being-dropped/

http://veithen.github.io/2014/01/01/how-tcp-backlog-works-in-linux.html

sysctl net.core.rmem_max

sysctl net.core.rmem_max=16777216
sysctl net.core.rmem_default=16777216
sysctl net.core.wmem_max=8388608
sysctl net.core.wmem_default=8388608

echo 'net.core.wmem_max=8388608' >> /etc/sysctl.conf
echo 'net.core.rmem_max=16777216' >> /etc/sysctl.conf

int rc, optval;
int optlen = sizeof(optval);

rc = getsockopt(fd, SOL_SOCKET, SO_RCVBUF, &optval, &optlen);
printf("xxxxxxxxxxxx %d %d\n", rc, optval);

int sbuf = 1024 * 1024 * 8;
err = setsockopt(fd, SOL_SOCKET, SO_RCVBUF, &bufsize, sizeof(bufsize));

echo 8388608 > /proc/sys/net/core/rmem_default


ICMP 报文在 Linux C 中通过 `struct icmp[netinet/ip_icmp.h]` 定义，而报文中的消息体，则根据不同 `TYPE`、`CODE` 会有所区别。

在 C 中，通过 `union` 进行适配，为了方便使用，同时又定义了很多辅助的宏定义。

#### Echo Request(8)/Reply(0)

icmp_id
icmp_seq







IP 报文头为 20 字节 [IP头部结构详解](http://codingstone.com/content.php?blockTableName=network&blogID=2) 。

ICMP 报文头根据 type 和 code 的不同，其对应的大小也有所区别，详见 [使用Python的Socket模块构建一个UDP扫描工具](http://www.cnnetsec.com/2308.html) 。

关于 ICMP 也可以参考 http://courses.cs.vt.edu/cs4254/fall04/slides/raw_6.pdf


ICMP 报文格式
http://www.cnblogs.com/jingmoxukong/p/3811262.html

Ping 使用的是 ICMP 报文，其报头为 8 字节，数据报长度最大为 64K 字节。


ping4_run()
 |-ping4_parse_reply()
 | |-is_ours() 对于ICMP_ECHOREPLY返回类型
 | |-gather_statistics()
 |
 |  其它类型
 |

type of service (ToS


对于通过 SOCK_RAW + ICMP 实现套接字，会接收到所有发送到本机的报文。

1. Destination Host Unreachable

* 校验和算法，把被校验的数据 16 位进行累加，若数据字节长度为奇数，则数据尾部补一个字节的 0 以凑成偶数，然后取反码，。

此算法适用于IPv4、ICMPv4、IGMPV4、ICMPv6、UDP和TCP校验和，更详细的信息请参考RFC1071，校验和字段为上述ICMP数据结构的icmp_cksum变量。
标识符�D�D用于唯一标识ICMP报文, 为上述ICMP数据结构的icmp_id宏所指的变量。
顺序号�D�Dping命令的icmp_seq便由这里读出，代表ICMP报文的发送顺序，为上述ICMP数据结构的icmp_seq宏所指的变量。



setsockopt()
* SOL_SOCKET, SO_BINDTODEVICE  绑定到某个设备上。
* SOL_SOCKET, SO_MARK 用来添加标记。
* SOL_SOCKET, SO_TIMESTAMP 让协议栈接受到一个网络帧时为其打上时间戳，并将此时间戳作为一笔附加数据，与网络帧数据一起递交到上层协议。

/post/network-netfilter-iptables.html

### Mark 标记

用于将特定的数据包打上标签，供 iptables 配合 TC 做 QOS 流量限制、应用策略路由。

系统可用模块，对 CentOS 而言可通过 `ls /usr/lib64/xtables/ | grep -i mark` 查看，其中大写的为标记模块，小写的为匹配模块。

ls /usr/lib/iptables/|grep -i mark

----- 查看关于Mark标记的帮助信息
# iptables -j MARK --help
# iptables -m mark --help

----- 将所有TCP数据标记1
# iptables -t mangle -A PREROUTING -p tcp -j MARK --set-mark 1

----- 匹配标记1的数据并保存数据包中的MARK到连接中
# iptables -t mangle -A PREROUTING -p tcp -m mark --mark 1 -j CONNMARK --save-mark


#### 策略路由

标签并不是设置在数据包内容中，而是在内核中数据包的载体上，如果需要在数据包内容中设置标签，可以使用 TOS 规则目标，也就是修改 IP 数据包头的 TOS 值。

----- 将从网络接口tun0进入的、目标端口为5222的TCP数据包设置mark值为1
# iptables -t mangle -A PREROUTING -j MARK --set-mark 1 -i tun0 -p tcp --dport 5222

接着，设置的 mark 值可用来设定策略路由，比如，把 mark 值为 1 的数据包交由网关 192.168.0.1 转发。

----- 1. 确定一张空路由表，这里选定300
# ip route show table 300
----- 2. 在表中添加路由条目
# ip route add default via 192.168.0.1 table 300
----- 3. 查看当前路由规则
# ip rule list
----- 4. 为mark值为1的数据包指定路由表策略
# ip rule add fwmark 0x1 table 300

通过这种方法，可以使用 iptables 根据匹配规则设置 mark，再由路由模块根据 mark 值进行路由决策，从而实现复杂的策略路由。

switch (icmp_hdr->icmp_type) {
case ICMP_ECHOREPLY:
        ident = ntohs(icmp_hdr->icmp_id);
        seq   = ntohs(icmp_hdr->icmp_seq);
        break;

case ICMP_ECHO: /* Maybe send by another ping tools */
        return NULL;

case ICMP_DEST_UNREACH:    /*  3 */
case ICMP_SOURCE_QUENCH:   /*  4 */
case ICMP_REDIRECT:        /*  5 */
case ICMP_TIME_EXCEEDED:   /* 11 */
case ICMP_PARAMETERPROB: { /* 12 */
        struct iphdr *iph = (struct iphdr *)(buffer + sizeof(struct icmphdr));
        struct icmphdr *icmph = (struct icmphdr *)(buffer +
                        (sizeof(struct icmphdr) + iph->ihl * 4));

        if (buffer_len < sizeof(struct iphdr) + 2 * ICMP_MINLEN ||
                        buffer_len < (size_t)iph->ihl * 4 + 2 * ICMP_MINLEN) {
                log_error(LIBNAME "error package too short, len %d, IP header %d",
                                buffer_len, iph->ihl);
                return NULL;
        }

        if (icmph->type != ICMP_ECHO) {
                log_error(LIBNAME "invalid type %d(expect %d) for %d",
                                icmph->type, ICMP_ECHO, icmp_hdr->icmp_type);
                return NULL;
        }

        ident = ntohs(icmph->un.echo.id);
        seq   = ntohs(icmph->un.echo.sequence);
        status = (icmp_hdr->icmp_type << 8) + icmp_hdr->icmp_code;

        break;
}
default:
        log_warning(LIBNAME "IPv4 unexpected ICMP type 0x%02x", icmp_hdr->icmp_type);
        return NULL;
}
-->

<h2 id="其它">其它</h2>

<h3 id="抓包">抓包</h3>

<p>可以通过如下命令获取包。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">----- ICMP echo request
$ tcpdump -nni eth0 -e icmp[icmptype] == 8

----- ICMP echo reply
$ tcpdump -nni eth0 -e icmp[icmptype] == 0

----- 保存到文件中
$ tcpdump -nni eth0 -w /tmp/icmp.pcap -e icmp[icmptype] == 0

----- 读取文件
$ tcpdump -nn -r icmp.pcap</code></pre></figure>

<h3 id="ttl">TTL</h3>

<p>Time To Live, TTL 存活时间，表示这个 PING 数据包能在网络上存活多少时间，实际上就是用来表示可以被路由转发多少次，在 IP 头中通过 8bits 表示。</p>

<p>执行 Ping 操作时，会在本机发送一个数据包，正常来说，数据包会经过一定的路由到达目的主机。不过，由于很多原因可能会导致一些数据包不能正常传送到目的主句，为了防止由于数据包一直传输导致网络负载增加，增加的 TTL 作为包的存活时间。</p>

<p>当数据包传送到一个路由器之后，TTL 就自动减 1，如果减到 0 了还是没有传送到目的主机，那么就自动丢弃，此时一般是 Request timed out 了。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">64 bytes from 192.168.9.1: icmp_seq=1 ttl=60 time=0.909 ms</code></pre></figure>

<p>目前测试来看，当 ICMP 报文发送之后，其返回的报文实际上会重新设置(依赖目标机器的设置)，也即是说 TTL 的值是单程的。</p>

<p>在 Linux 命令行中，可以通过 <code>-t</code> 参数进行设置。例如，返回的 TTL 为 60，那么你可以初步猜测对端设置的初始 TTL 为 64，那么通过 <code>-t 2</code> 设置时候，就会出现 <code>Time to live exceeded</code> 的报错。</p>

<h4 id="系统设置">系统设置</h4>

<p>Windows 一般在 <code>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters</code> 注册表中设置。</p>

<p>在 Linux 中，可以通过如下方式修改默认的 TTL 。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">----- 临时修改
# sysctl net.ipv4.ip_default_ttl=129
# echo 129 &gt; /proc/sys/net/ipv4/ip_default_ttl
----- 保存到配置文件中
$ cat /etc/sysctl.conf
net.ipv4.ip_default_ttl=129</code></pre></figure>

<p>各个系统的默认值如下。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">Linux              64/255
Windows NT/2000/XP 128
Windows 98         32
UNIX               255</code></pre></figure>

<h3 id="qos">QoS</h3>

<p>Quality of Service, QoS 服务质量，提供的质量越好，表示有越低的延迟、丢包、抖动等，同时其吞吐量和可靠性要更高。简单来说，就是利用包的特定标志位，告诉路由器如何处理包，是先还是后。</p>

<p>在第二层(Link Layer)和第三层(IP)都有标示位，其中 IP 层采用的是 8Bits，包括 IPv4 和 IPv6 都有，只是其位置不同。</p>

<h2 id="套接字">套接字</h2>

<p>ICMP 套接字的目的是允许在不设置 SUID 或者 CAP_NET_RAW 权限的时候允许 ping 程序的使用，详细的实现可以查看内核的邮件列表 <a href="https://lkml.org/lkml/2011/5/10/389">add IPPROTO_ICMP socket kind</a> 。</p>

<p>是否支持是通过内核的 <code>net.ipv4.ping_group_range</code> 指定，这是一对整数，指定了允许使用 ICMP 套接字的组 ID 的范围，默认为 <code>1 0</code> 也就意味着没有人能够使用这个特性。</p>

<p>可以通过如下命令修改。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text"># sysctl -w net.ipv4.ping_group_range=&#39;0 10&#39;</code></pre></figure>

<p>然后可以通过如下方式创建 ICMP 的套接字。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">import socket
sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM, socket.IPPROTO_ICMP)</code></pre></figure>

<p>如果系统不支持这个特性，在创建套接字的时候会得到 <code>Protocol not supported</code> 的错误，而如果没有权限，则会得到 <code>Permission denied</code> 的错误。</p>

<p>它的类型和 UDP 套接字一样，是 <code>SOCK_DGRAM</code> 而非 <code>SOCK_RAW</code>，这也就意味着你不会收到 20 字节的 IP 头，而且内核会计算校验和，并且填充 ICMP ID，在接收到响应后，内核会只把相应 ID 的 ICMP 响应返回给程序，不需要自己或者要求内核过滤了。</p>

<h2 id="参考">参考</h2>

<p>可以参考 <a href="https://github.com/octo/liboping">Github liboping</a> 。</p>

<p>关于各个操作系统的默认 TTL 可以参考 <a href="https://subinsb.com/default-device-ttl-values/">Default TTL (Time To Live) Values of Different OS</a> 。</p>

<!--
http://gienmin.blogspot.com/2013/12/qos_18.html
http://www.map.meteoswiss.ch/map-doc/ftp-probleme.htm
-->


  <hr>
  <nav>
    <ul class="pager">
         <li class="previous"><a href="/post/golang-syntax-interface-introduce.html" title="Golang 语法之接口">&larr; Older</a></li> 
         <li class="next"><a href="/post/program-c-gcc-security-options.html" title="GCC 安全编译选项">Newer &rarr;</a></li> 
    </ul>
  </nav><br>
<!--
  <hr><div id="section-donate"><span>赏</span></div><br>
  <p style="text-indent:0px;text-align:center;">如果喜欢这里的文章，而且又不差钱的话，欢迎打赏个早餐 ^_^</p><br>
  <div class="row" style="text-align:center;" >
    <div class="col-md-6"><img src="/images/system/barcode-pay-alipay.jpg" style="width:150px;height:150px;" title="支付宝捐赠" /><br>支付宝打赏</div>
    <div class="col-md-6"><img src="/images/system/barcode-pay-wechat.jpg" style="width:150px;height:150px;" title="微信捐赠" /><br>微信打赏</div>
  </div><br><hr>
-->
  <p style="text-indent:0px;text-align:center;">如果喜欢这里的文章，而且又不差钱的话，欢迎打赏个早餐 ^_^</p>
  <div id="donate_module">
    <style type="text/css">
      .donate_bar a.btn_donate{
        display: inline-block;
        position:      relative;
        text-align:    center;
        width: 82px;
        height: 82px;
        background: url("/images/misc/btn_reward.gif") no-repeat;
        _background: url("/images/misc/btn_reward.gif") no-repeat;
        -webkit-transition: background 0s;
        -moz-transition: background 0s;
        -o-transition: background 0s;
        -ms-transition: background 0s;
        transition: background 0s;
      }
      .donate_bar a.btn_donate:hover{ background-position: 0px -82px;}
      .donate_bar .donate_txt {
        display: block;
        color: #9d9d9d;
        font: 14px/2 "Microsoft Yahei";
      }
    </style>
    <div id="donate_board" class="donate_bar row" style="text-align:center;" >
      <a id="btn_donate" class="btn_donate" target="_self" href="javascript:;" title="Donate 打赏"></a>
    </div>
    <div id="donate_guide" class="donate_bar center hidden">
      <div class="row" style="text-align:center;" >
        <div class="col-md-6"><img src="/images/system/barcode-pay-alipay.jpg" style="width:150px;height:150px;" title="支付宝捐赠" /><br>支付宝打赏</div>
        <div class="col-md-6"><img src="/images/system/barcode-pay-wechat.jpg" style="width:150px;height:150px;" title="微信捐赠" /><br>微信打赏</div>
      </div>
    </div>
    <script type="text/javascript">
      document.getElementById('btn_donate').onclick = function(){
        $('#donate_board').addClass('hidden');
        $('#donate_guide').removeClass('hidden');
      }
      function donate_on_web(){
        $('#donate').submit();
      }
    </script>
  </div>

  <hr>

  <div id="gitmentContainer"></div>
  <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
  <script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
  <script>
  var gitment = new Gitment({
      id: '1522598400',
      owner: 'Jin-Yang',
      repo: 'jin-yang.github.com',
      oauth: {
          client_id: '6d89d48ce689192bf95d',
          client_secret: 'c9a720aafb8e3084e3feb46cadee80b03cdc792f',
      },
  });
  gitment.render('gitmentContainer');
  </script>

  <!-- 多说评论框 start -->
  <!--<div class="ds-thread" data-thread-key="请将此处替换成文章在你的站点中的ID" data-title="请替换成文章的标题" data-url="请替换成文章的网址"></div>-->
  <!--
  <div class="ds-thread" data-thread-key="/post/network-icmp-ping-program-introduce.html" data-title="ICMP Ping" data-url="/post/network-icmp-ping-program-introduce.html"></div>
  -->
  <!-- 多说评论框 end -->
  <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
  <!--
  <script type="text/javascript">
      var duoshuoQuery = {short_name:"jinyangposts"};
      (function() {
          var ds = document.createElement('script');
          ds.type = 'text/javascript';ds.async = true;
          ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
          ds.charset = 'UTF-8';
          (document.getElementsByTagName('head')[0]
           || document.getElementsByTagName('body')[0]).appendChild(ds);
      })();
  </script>
  -->
  <!-- 多说公共JS代码 end -->
</div>

    </div>
    <div class="col-lg-3 visible-lg blog-sidebar">
    <center><a href="/"><img src="/images/system/linux-liberty.png" width="200" /></a></center>
<h2>About This Blog</h2>
<div class="sidebar-module">
<p style="text-indent:0em;margin:0px;padding:0px;">This is a personal weblog ^_^ generated with Jekyll, if you like it or have some questions,
just feel free to contact me :)</p>
</div><!-- end of "node" "about" -->



<h2>Recent Posts</h2>
<div class="list-group">
  
    <a class="list-group-item" href="/post/linux-program-cpu-cache-introduce_init.html">CPU Cache</a>
  
    <a class="list-group-item" href="/post/artificial-intelligence-decision-tree-introduce.html">决策树</a>
  
    <a class="list-group-item" href="/post/linux-ebpf-bcc-tools-introduce.html">BCC 工具使用</a>
  
    <a class="list-group-item" href="/post/linux-ebpf-basic-usage-introduce.html">eBPF 简介</a>
  
    <a class="list-group-item" href="/post/math-monte-carlo-sample-introduce.html">采样算法</a>
  
</div>

<h2>Categories</h2>
<ul class="list-group" style="margin:0px;">
  
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#bash"> bash</a>
    <span class="badge">2</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#database"> database</a>
    <span class="badge">86</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#golang"> golang</a>
    <span class="badge">28</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#linux"> linux</a>
    <span class="badge">301</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#misc"> misc</a>
    <span class="badge">244</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#mysql"> mysql</a>
    <span class="badge">79</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#network"> network</a>
    <span class="badge">49</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#postgresql"> postgresql</a>
    <span class="badge">4</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#program"> program</a>
    <span class="badge">138</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#python"> python</a>
    <span class="badge">25</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#react"> react</a>
    <span class="badge">1</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#rtems"> rtems</a>
    <span class="badge">1</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#sql"> sql</a>
    <span class="badge">10</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#tools"> tools</a>
    <span class="badge">1</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#webserver"> webserver</a>
    <span class="badge">25</span>
  </li>
  
</ul><!-- end of "node" "categories" -->

<h2>Related Links</h2>
<ul class="list-group" style="margin:0px">
  <li style="margin-left:0em" class="list-group-item">
    <div class="row">
      <div class="col-xs-4">
       <a href="http://www.rtems.org" title="To RTEMS"><img class="img-thumbnail img-responsive" src="/images/system/rtems.png"  alt="RTEMS"/></a>
      </div>
      <div class="col-xs-8 center-block" style="padding:0px;">
        <strong>RTEMS</strong><br>
        <div class="sidebar-description">Real-Time Executive for Multiprocessor System</div>
      </div>
    </div>
  </li>
  <li style="margin-left:0em" class="list-group-item">
    <div class="row">
      <div class="col-xs-4">
       <a href="http://www.gnu.org" title="To GNU">
       <img class="img-thumbnail img-responsive" src="/images/system/gnu.jpg" alt="GNU" /></a>
      </div>
      <div class="col-xs-8 center-block" style="padding:0px;">
        <strong>GNU</strong><br>
        <div class="sidebar-description">A Unix-linux Operating System</div>
      </div>
    </div>
  </li>
  <li style="margin-left:0em" class="list-group-item">
    <div class="row">
      <div class="col-xs-4">
    <a href="http://www.kernel.org" title="To Linux Kernel">
    <img class="img-thumbnail img-responsive" src="/images/system/linux.png"  alt="LINUX" /></a>
      </div>
      <div class="col-xs-8 center-block" style="padding:0px;">
        <strong>Linux Kernel</strong><br>
        <div class="sidebar-description">Maintained by Linux Kernel Organization</div>
      </div>
    </div>
  </li>
  <li style="margin-left:0em" class="list-group-item">
    <div class="row">
      <div class="col-xs-4">
    <a href="http://arduino.cc" title="To Arduino">
    <img class="img-thumbnail img-responsive" src="/images/system/arduino.png"  alt="ARDUINO" /></a>
      </div>
      <div class="col-xs-8 center-block" style="padding:0px;">
        <strong>Arduino</strong><br>
        <div class="sidebar-description">Open-source Electronic Prototyping Platform</div>
      </div>
    </div>
  </li>
</ul>

<h2>Search</h2>
<div class="sidebar-module">
  <form class="search" method="GET" action="https://www.google.com.hk/search">
    <input type="text" name="q" class="search-query" placeholder=" Search on Google">
    <input type="hidden" name="ie" value="utf-8">
    <input type="submit" name="sa" value="Search" />
  </form><br>
  <input type="text" class="search-field" placeholder=" Search This Site">
  <div class="search-results"></div>
</div>



    </div>
  </div>
<hr><p class="text-center">This Site was built by Jin Yang, generated with Jekyll, and hosted on GitHub Pages<br/> &copy;2013-2019 &ndash; Jin Yang</p><div class="footer-logo"></div>

</div>
</body>
</html>
