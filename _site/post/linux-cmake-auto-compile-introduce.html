<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
  <meta name="baidu-site-verification" content="B786jeR0MV" />
  <meta name="msvalidate.01" content="29F791E7F785800340E37AD7C714D2A7" />
  <meta name="google-site-verification" content="p7jJ5d3kF9yxRhpIo5GgHXAZ1ATKVyZhV2kf6mEGOv0" />
  <title>CMake 自动编译|JinYang's Blog</title>
  <meta name="keywords" content="linux,automake,configure,cmake">
  <meta name="description" content="在 Linux 中，经常使用 GNU 构建系统，也就是利用脚本和 make 程序在特定平台上构建软件，这种方式几乎成为一种习惯，被广泛使用。这里简单介绍下这种构建方式的细节，以及开发者如何利用 autotools 创建兼容 GNU 构建系统的项目。">

  <script src="https://cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>
  <script type="text/javascript">
  !window.jQuery && document.write('<script src="/static/js/jquery.min.js"><\/script>');
  </script>
  <script src="https://cdn.bootcss.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
  <script type="text/javascript">
  !$('body').popover && document.write('<script src="/static/js/bootstrap.min.js"><\/script>');
  </script>
  <script type="text/javascript" src="/static/js/main.js"></script>
  <!-- <link rel="stylesheet prefetch" href="http://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css"> -->
  <link type="text/css" rel="stylesheet prefetch" href="/static/css/bootstrap.min.css">
  <!-- <link href="http://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"> -->
  <link type="text/css" rel="stylesheet prefetch" href="/static/css/font-awesome.min.css">
  <link type="text/css" rel="stylesheet prefetch" href="/static/css/pygments.css">
  <link type="text/css" rel="stylesheet prefetch" href="/static/css/screen.css">
  <style type="text/css">
  
    .post-container > p {text-indent: 2em;}
  
  </style>
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-124556620-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-124556620-1');
</script>

</head>

<body>
<nav class="navbar navbar-default navbar-inverse navbar-fixed-top navbar-wrapper">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
      </button><a class="navbar-brand" href="/">Jin-Yang</a>
    </div>
    <div id="navbar" class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        <li  ><a href="/"> Home </a></li>
        <li  ><a href="/archives.html"> Archive </a></li>
        <li  ><a href="/categories.html"> Categories </a></li>
        <li  ><a href="/projects.html"> Projects </a></li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"> Others <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li class="dropdown-header">常用网站</li>
            <li role="separator" class="divider"></li>
            <li><a href="https://www.rtems.org/">www.rtems.org</a></li>
            <li><a href="http://www.gnu.org/">www.gnu.org</a></li>
            <li><a href="https://www.kernel.org/">www.kernel.org</a></li>
            <li><a href="https://www.arduino.cc/">www.arduino.cc</a></li>
          </ul>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li  ><a href="/about.html"> About </a></li>
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</nav>

<div id="myCarousel" class="carousel slide" data-ride="carousel">
  <!-- Indicators -->
  <ol class="carousel-indicators">
    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
    <li data-target="#myCarousel" data-slide-to="1"></li>
    <li data-target="#myCarousel" data-slide-to="2"></li>
    <li data-target="#myCarousel" data-slide-to="3"></li>
    <li data-target="#myCarousel" data-slide-to="4"></li>
  </ol>
  <div class="carousel-inner" role="listbox">
    <div class="item active">
      <img src="data:image/gif;base64,R0lGODlhAQABAIAAAGZmZgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" alt="Second slide">
      <div class="container">
        <div class="carousel-caption">
          <h1>KISS</h1>
          <h2>Keep It Simple and Stupid.</h2>
          <!--<a class="btn btn-lg btn-primary" href="#" role="button">Sign up today</a>-->
        </div>
      </div>
    </div>
    <div class="item">
      <img src="data:image/gif;base64,R0lGODlhAQABAIAAAGZmZgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" alt="Second slide">
      <div class="container">
        <div class="carousel-caption">
          <h1>Seize The Day</h1><h1>And Get Busy Living</h1>
        </div>
      </div>
    </div>
    <div class="item">
      <img src="data:image/gif;base64,R0lGODlhAQABAIAAAGZmZgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" alt="Second slide">
      <div class="container">
        <div class="carousel-caption">
          <h1>Stay hungry</h1><h1>Stay foolish</h1>
        </div>
      </div>
    </div>
    <div class="item">
      <img src="data:image/gif;base64,R0lGODlhAQABAIAAAGZmZgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" alt="Second slide">
      <div class="container">
        <div class="carousel-caption">
	  <h2>Ever tried, ever failed</h2><h2>No matter, try again</h2><h2>Fail again, fail better</h2>
        </div>
      </div>
    </div>
    <div class="item">
      <img src="data:image/gif;base64,R0lGODlhAQABAIAAAGZmZgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==" alt="Second slide">
      <div class="container">
        <div class="carousel-caption">
          <h1>Nothing is true</h1><h1>Every is permitted</h1>
        </div>
      </div>
    </div>
  </div>
  <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
    <span class="glyphicon glyphicon-chevron-left"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
    <span class="glyphicon glyphicon-chevron-right"></span>
    <span class="sr-only">Next</span>
  </a>
</div><!-- /.carousel -->

<div class="container">
  <div class="row">
    <div class="col-lg-9 blog-main" style="min-width: 500px">
    
<div class="post-container">
  <div class="blog-header">
    <h1>CMake 自动编译</h1>
    <div class="post-description">
      <i class="fa fa-calendar"></i> 2015-11-13 Friday &nbsp; &nbsp;
      <i class="fa fa-tags"></i>  linux ,  misc  
      
    </div>
  </div>
  <hr>
  <p>在 Linux 中，经常使用 GNU 构建系统，也就是利用脚本和 make 程序在特定平台上构建软件，这种方式几乎成为一种习惯，被广泛使用。</p>

<p>这里简单介绍下 CMake 的使用。</p>

<!-- more -->

<h2 id="简介">简介</h2>

<p>在介绍示例之前，先说明一下 CMake 有两种编译方式：内部构建和外部构建。内部构建直接在源码目录下执行 <code>cmake .</code>，外部构建则会在一个目录下构建，不会影响原源码的结构。</p>

<p>其基本结构可以简单描述为：</p>

<ol>
  <li>依赖 <code>CMakeLists.txt</code> 文件，项目主目标一个，主目录中可指定包含的子目录；</li>
  <li>在项目 <code>CMakeLists.txt</code> 中使用 <code>PROJECT</code> 指定项目名称，通过 <code>ADD_SUBDIRECTORY</code> 添加子目录；</li>
  <li>子目录 <code>CMakeLists.txt</code> 将从父目录 <code>CMakeLists.txt</code> 继承设置。</li>
</ol>

<p>另外，上述通过 <code>PROJECT</code> 设置好工程后，可以通过 <code>${hello_SOURCE_DIR}</code> 引用，注意大小写。</p>

<p>因为 <code>CMakeLists.txt</code> 可执行脚本并通过脚本生成一些临时文件，因此 CMake 无法跟踪到底产生了那些临时文件，因此，没有办法提供一个可靠的 <code>make distclean</code> 方案，为此可以使用外部编译。</p>

<p>另外，也没提供 <code>make uninstall</code> 命令，卸载可以通过 <code>cat install_manifest.txt | sudo xargs rm</code>  命令执行删除或卸载。</p>

<h2 id="简单示例">简单示例</h2>

<p>最简单示例单文件输出 <code>Hello World!</code>，只需创建两个文件：<code>main.c</code> 和 <code>CMakeLists.txt</code>；然后通过 <code>cmake . &amp;&amp; make</code> 进行编译，要查看详细信息可以 <code>make VERBOSE=1</code> 或者 <code>VERBOSE=1 make</code> 。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">$ cat CMakeLists.txt
CMAKE_MINIMUM_REQUIRED(VERSION 2.6)
PROJECT(hello)                                              # 项目名称
SET(SRC_LIST main.c)                                        # 添加源码，可忽略
MESSAGE(STATUS &quot;This is BINARY dir &quot; ${HELLO_BINARY_DIR})   # 打印信息
MESSAGE(STATUS &quot;This is SOURCE dir &quot; ${HELLO_SOURCE_DIR})
ADD_EXECUTABLE(hello ${SRC_LIST})

$ cat main.c
#include &lt;stdio.h&gt;
int main()
{
    printf(&quot;Hello World!\n&quot;);
    return 0;
}</code></pre></figure>

<p>在上述 <code>MESSAGE()</code> 中，会打印变量用于调试，该变量是通过 <code>PROJECT()</code> 默认设定的变量，详见 <code>PROJECT()</code> 的使用。</p>

<p>调试的话可以使用 <code>cmake . -DCMAKE_BUILD_TYPE=Debug</code> ，不过此时使用的绝对地址。</p>

<h2 id="配置文件">配置文件</h2>

<p>通常 <code>autotools</code> 会根据平台动态生成 <code>config.h</code> 文件，在 CMake 中同样可以生成。</p>

<p>除了支持脚本外，还包括了一些常见的模块 (Modules)，例如 CentOS 中保存在 <code>/usr/share/cmake/Modules/</code> 目录下，在使用时需要先通过 <code>INCLUDE()</code> 指令包含相应的模块。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text"># usage: CHECK_INCLUDE_FILES (&lt;header&gt; &lt;RESULT_VARIABLE&gt; )
INCLUDE (CheckIncludeFiles)

CHECK_INCLUDE_FILES (malloc.h HAVE_MALLOC_H)
CHECK_INCLUDE_FILES (&quot;sys/param.h;sys/mount.h&quot; HAVE_SYS_MOUNT_H)
CONFIGURE_FILE(${CMAKE_CURRENT_SOURCE_DIR}/config.h.in ${CMAKE_CURRENT_BINARY_DIR}/config.h)</code></pre></figure>

<p>在执行时，会将结果保存在 <code>CMakeCache.txt</code> 文件中，类似如下；如果要重新生成则需要删除。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">//Have include HAVE_MALLOC_H
HAVE_MALLOC_H:INTERNAL=1</code></pre></figure>

<p>在 <code>config.h.in</code> 中添加如下内容。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">#cmakedefine HAVE_MALLOC_H 1
#cmakedefine HAVE_SYS_MOUNT_H</code></pre></figure>

<p>在检测后，会将 <code>#cmakedefine</code> 替换掉，如下。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">#define HAVE_MALLOC_H 1
#define HAVE_SYS_MOUNT_H

/* #undef HAVE_MALLOC_H 1 */
/* #define HAVE_SYS_MOUNT_H */</code></pre></figure>

<p>详细内容可以参考 <a href="https://itk.org/Wiki/CMake:How_To_Write_Platform_Checks">CMake:How To Write Platform Checks</a> 。</p>

<h3 id="常见示例">常见示例</h3>

<!--
CHECK_FUNCTION_EXISTS(backtrace HAVE_BACKTRACE)
CHECK_LIBRARY_EXISTS(pthread pthread_setname_np "" HAVE_PTHREAD_SETNAME_NP)
-->

<h4 id="头文件检查">头文件检查</h4>

<figure class="highlight"><pre><code class="language-text" data-lang="text">CHECK_INCLUDE_FILE(&quot;regex.h&quot; HAVE_REGEX_H)
CHECK_INCLUDE_FILES(&quot;sys/prctl.h;sys/others.h&quot; HAVE_SYS_PRCTL_H)</code></pre></figure>

<p>其中前者只能检查一个，后者可以检查多个头文件。</p>

<h4 id="函数检查">函数检查</h4>

<figure class="highlight"><pre><code class="language-text" data-lang="text">CHECK_FUNCTION_EXISTS(backtrace HAVE_BACKTRACE)</code></pre></figure>

<p>其中 <code>CHECK_FUNCTION_EXISTS()</code> 仅能判断在连接时能找到的函数，一般也就是标准头文件、标准库中的函数，如果是非标准的可以通过 <code>CHECK_SYMBOL_EXISTS()</code> 检查。</p>

<h4 id="变量宏检查">变量、宏检查</h4>

<figure class="highlight"><pre><code class="language-text" data-lang="text">CHECK_SYMBOL_EXISTS(ENAMETOOLONG errno.h HAVE_ENAMETOOLONG)</code></pre></figure>

<p>用来检查函数、变量或宏存在，其中文件列表可以是 <code>"foo.h;bar.h"</code> 这类的方式，注意无法识别类型或者枚举，此时可以考虑使用 <code>CheckTypeSize()</code> 或 <code>CheckCSourceCompiles()</code> 。</p>

<p>其中 <code>CMakeLists.txt</code> 示例文件如下。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">CMAKE_MINIMUM_REQUIRED(VERSION 2.6)
PROJECT(hello)

INCLUDE(CheckIncludeFile)
INCLUDE(CheckIncludeFiles)
CHECK_INCLUDE_FILE(&quot;regex.h&quot; HAVE_REGEX_H)

INCLUDE(CheckFunctionExists)
CHECK_FUNCTION_EXISTS(backtrace HAVE_BACKTRACE)

INCLUDE(CheckLibraryExists)
CHECK_LIBRARY_EXISTS(pthread pthread_setname_np &quot;&quot; HAVE_PTHREAD_SETNAME_NP)

INCLUDE(CheckSymbolExists)
CHECK_SYMBOL_EXISTS(ENAMETOOLONG errno.h HAVE_ENAMETOOLONG)

CONFIGURE_FILE(config.h.in config.h @ONLY)</code></pre></figure>

<p>其中 <code>config.h.in</code> 文件内容如下。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">#ifndef CONFIG_H_
#define CONFIG_H_

#cmakedefine HAVE_REGEX_H            1
#cmakedefine HAVE_BACKTRACE          1
#cmakedefine HAVE_PTHREAD_SETNAME_NP 1
#cmakedefine HAVE_ENAMETOOLONG       1

#endif</code></pre></figure>

<h3 id="安装">安装</h3>

<p>CMake 默认会在与源码目录相同的路径下生成二进制文件或者库文件，实际上可以通过如下方式进行设置。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">SET(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/bin)
SET(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib)
SET(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib)</code></pre></figure>

<p>当然，对于单个可执行文件，也可以通过 <code>set_target_properties()</code> 指令设置如下的变量覆盖全局的参数。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">RUNTIME_OUTPUT_DIRECTORY
LIBRARY_OUTPUT_DIRECTORY
ARCHIVE_OUTPUT_DIRECTORY</code></pre></figure>

<h4 id="安装指令">安装指令</h4>

<p>在编译完成之后，可以通过 <code>make install</code> 进行安装，通过 <code>cat install_manifest.txt | xargs rm</code> 删除即可，不过需要提前指定安装规则。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">INSTALL(TARGETS foobar DESTINATION bin)
INSTALL(FILES foobar.h DESTINATION include)</code></pre></figure>

<p>如上的配置会将 <code>foobar</code> 和 <code>foobar.h</code> 安装到 <code>/usr/local/{bin,include}</code> 目录下即可，实际上对于安装目录而言，也可以直接使用 <code>INCLUDE(GNUInstallDirs)</code> 指定的目录。</p>

<p>对于 <code>TARGETS</code> 的配置，主要有三个参数，分别为 <code>ARCHIVE</code>、<code>LIBRARY</code>、<code>RUNTIME</code> ，一般会类似如下的方式编写。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">INSTALL(TARGETS targets...
    ARCHIVE
        DESTINATION     &lt;dir&gt;
        PERMISSIONS     permissions...
        CONFIGURATIONS  [Debug|Release|...]
        COMPONENT       &lt;component&gt;
    RUNTIME
        DESTINATION     &lt;dir&gt;
        PERMISSIONS     permissions...
        CONFIGURATIONS  [Debug|Release|...]
        COMPONENT       &lt;component&gt;
    PUBLIC_HEADER
        DESTINATION     &lt;dir&gt;
        PERMISSIONS     permissions...
        CONFIGURATIONS  [Debug|Release|...]
        COMPONENT       &lt;component&gt;
)</code></pre></figure>

<p>其中上述的 <code>targets</code> 可以指定多个，而且可以是不同的类型，如二进制、动态库、静态库、头文件等。</p>

<p>上述指定的 <code>DESTINATION</code> 一般是相对路径，可以通过 <code>CMAKE_INSTALL_PREFIX</code> 指定其前缀，对于 Linux 默认是 <code>/usr/local/</code>；另外，其前面还可以指定 <code>DESTDIR</code> 目录。</p>

<p>除了使用 <code>TARGETS</code> 外，还可以使用 <code>FILES</code> 或者 <code>DIRECTORY</code> ，对于 <code>DIRECTORY</code> 使用比较灵活，常见需要注意的关键点如下。</p>

<h5 id="后缀符号">后缀符号</h5>

<p>需要注意其后缀的 <code>/</code> 符号。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">#----- 会将目录复制成为 dst/src/{subdirs and files...}
install(DIRECTORY   myproj/src DESTINATION dst)

#----- 会将目录复制成为 dst/{subdirs and files...}
install(DIRECTORY   myproj/src/ DESTINATION dst)</code></pre></figure>

<h5 id="文件过滤">文件过滤</h5>

<p>可以通过参数 <code>FILES_MATCHING</code> 用于指定操作档案的条件，可以使用 <code>PATTERN</code> 或 <code>REGEX</code> 两种匹配方式，要注意 <code>PATTERN</code> 会比对全路径而不只是文件名。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">INSTALL(DIRECTORY src/ DESTINATION include FILES_MATCHING PATTERN &quot;*.h&quot;)</code></pre></figure>

<p>以上会把 <code>src/</code> 底下所有文件后缀为 <code>.h</code> 的文件复制到 <code>include</code> 文件夹下，并且会保留原本目录树的结构。</p>

<p>另外，还可以在匹配条件后面通过 <code>EXCLUDE</code> 排除符合条件的文件或目录。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">INSTALL(DIRECTORY myapp/ mylib DESTINATION myproj PATTERN &quot;.git&quot; EXCLUDE)</code></pre></figure>

<h3 id="打包">打包</h3>

<p>可以通过 CPack 进行打包，也就是将编译后的二进制进行打包，当然也可以打包源码，分别通过如下命令进行打包。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">make package_source
make package</code></pre></figure>

<h3 id="宏和函数">宏和函数</h3>

<p>同大多数脚本语言一样，CMake 中也有宏和函数的概念，关键字分别为 <code>macro</code> 和 <code>function</code>，具体用法如下：</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">MACRO( [arg1 [arg2 [arg3 ...]]])
	 COMMAND1(ARGS ...)
	 COMMAND2(ARGS ...)
	 ...
ENDMACRO()

FUNCTION( [arg1 [arg2 [arg3 ...]]])
	 COMMAND1(ARGS ...)
	 COMMAND2(ARGS ...)
	 ...
ENDFUNCTION()</code></pre></figure>

<p>如下是一个求和的宏定义。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">macro(sum outvar)
	set(_args ${ARGN})
	list(LENGTH _args argLength)
	if(NOT argLength LESS 4)　# 限制不能超过4个数字
		message(FATAL_ERROR &quot;to much args!&quot;)
	endif()
	set(result 0)

	foreach(_var ${ARGN})
		math(EXPR result &quot;${result}+${_var}&quot;)
	endforeach()

	set(${outvar} ${result})
endmacro()

sum(addResult 1 2 3 4 5)
message(&quot;Result is :${addResult}&quot;)</code></pre></figure>

<p><code>${ARGN}</code> 是 CMake 中的一个变量，指代宏中传入的多余参数；上述宏只定义了一个参数 <code>outvar</code>，其余需要求和的数字都是不定形式传入的，所以需要先将多余的参数传入一个单独的变量中。</p>

<p>函数与宏的区别是，函数中的变量是局部的，不能直接传出。</p>

<h2 id="常用示例">常用示例</h2>

<h3 id="内置变量">内置变量</h3>

<p>如下是设置 C 编译器的参数，对于 CPP 则将 C 替换为 CXX 即可。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">set(CMAKE_C_COMPILER      &quot;gcc&quot; )               # 显示指定使用的编译器
set(CMAKE_C_FLAGS         &quot;-std=c99 -Wall&quot;)     # 设置编译选项，也可以通过add_definitions添加编译选项
set(CMAKE_C_FLAGS_DEBUG   &quot;-O0 -g&quot; )            # 调试包不优化
set(CMAKE_C_FLAGS_RELEASE &quot;-O2 -DNDEBUG &quot; )     # release包优化
set(CMAKE_C_FLAGS  &quot;${CMAKE_C_FLAGS} -Wno-sign-compare&quot;)   # 忽略某些告警</code></pre></figure>

<p>内置变量可在 cmake 命令中使用，如 <code>cmake -DBUILD_SHARED_LIBS=OFF -DCMAKE_BUILD_TYPE=Debug</code> 。</p>

<!--
EXECUTABLE_OUTPUT_PATH：可执行文件的存放路径
LIBRARY_OUTPUT_PATH：库文件路径
CMAKE_BUILD_TYPE:：build 类型(Debug, Release, ...)，
BUILD_SHARED_LIBS：Switch between shared and static libraries
-->

<h3 id="build-type">Build Type</h3>

<p>除了上述 <code>CMAKE_C_FLAGS_DEBUG</code> 指定不同类型的编译选项外，还可以通过如下方式指定。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">set(CMAKE_BUILD_TYPE Debug CACHE STRING &quot;set build type to debug&quot;)
if(NOT ${CMAKE_BUILD_TYPE} MATCHES &quot;Debug&quot;)
	SET(CMAKE_C_FLAGS &quot;-std=gnu99 ${CMAKE_C_FLAGS}&quot;)
    set(LIBRARIES Irrlicht_S.lib)
else()
    set(LIBRARIES Irrlicht.lib)
endif()</code></pre></figure>

<p>可以在命令行中通过如下方式编译 <code>cmake -DCMAKE_BUILD_TYPE=Debug ..</code>，最终的编译选项可以查看 <code>CMakeFiles/SRCFILE.dir/flags.make</code> 中的 <code>C_FLAGS</code> 选项，一般是 <code>CMAKE_C_FLAGS+CMAKE_C_FLAGS_MODE</code> 。</p>

<h3 id="测试用例">测试用例</h3>

<p>可以通过如下方式添加测试用例。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">option(WITH_UNIT_TESTS &quot;Compile with unit tests&quot; OFF)

# Setup testing
IF(WITH_UNIT_TESTS)
        ENABLE_TESTING()
        ADD_SUBDIRECTORY(test)
ENDIF()

# test/CMakeLists.txt
FILE(GLOB SRCS *.c)
ADD_EXECUTABLE(testfoo ${SRCS})
TARGET_LINK_LIBRARIES(testfoo libs)
ADD_TEST(
    NAME testfoo
    COMMAND testfoo your arguments
)</code></pre></figure>

<p>然后在编译时通过 <code>cmake .. -DWITH_UNIT_TESTS=ON</code> 执行，并通过 <code>make test</code> 进行测试，实际等价于在 <code>build</code> 目录下运行 <code>ctest</code> 命令。</p>

<p>另外，可以指定测试的参数，以及输出的匹配。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">ADD_TEST(test foobar 10 5)
SET_TESTS_PROPERTIES(test PROPERTIES PASS_REGULAR_EXPRESSION &quot;ok&quot;)</code></pre></figure>

<!---
# 测试 1 + 3 , 是否输出打印'is 4'
add_test(test_1_plus_3 my_test.elf 1 3)
set_tests_properties (test_1_plus_3
PROPERTIES PASS_REGULAR_EXPRESSION "is 4")  #
-->

<p>对于 valgrind，如果输出是 reachable 类型，那么实际上是依赖于 OS 的内存回收，此时及时已经配置了 <code>--error-exitcode=1</code> 也不会返回 0 ，尤其是对于全局变量。</p>

<p>为此，对于 CMake 而言，就需要配置 <code>FAIL_REGULAR_EXPRESSION "reachable"</code>，同时对于其它的内存泄露也会报错。</p>

<h3 id="文件渲染">文件渲染</h3>

<p>可以通过如下脚本，动态生成。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">$ cat CMakeLists.txt
CONFIGURE_FILE(
    &quot;${PROJECT_SOURCE_DIR}/gcc_debug_fix.sh.in&quot;
    &quot;${PROJECT_BINARY_DIR}/gcc_debug_fix.sh&quot;
    @ONLY)
... ...
ADD_EXECUTABLE (my_exe ...)
... ...
SET_TARGET_PROPERTIES(my_exe PROPERTIES RULE_LAUNCH_COMPILE &quot;${PROJECT_BINARY_DIR}/gcc_debug_fix.sh&quot;)

$ cat gcc_debug_fix.sh.in
#!/bin/sh
PROJECT_BINARY_DIR=&quot;@PROJECT_BINARY_DIR@&quot;
PROJECT_SOURCE_DIR=&quot;@PROJECT_SOURCE_DIR@&quot;

# shell script invoked with the following arguments
# $(CXX) $(CXX_DEFINES) $(CXX_FLAGS) -o OBJECT_FILE -c SOURCE_FILE

# extract parameters
SOURCE_FILE=&quot;${@: -1:1}&quot;
OBJECT_FILE=&quot;${@: -3:1}&quot;
COMPILER_AND_FLAGS=${@:1:$#-4}

# make source file path relative to project source dir
SOURCE_FILE_RELATIVE=&quot;${SOURCE_FILE:${#PROJECT_SOURCE_DIR} + 1}&quot;

# make object file path absolute
OBJECT_FILE_ABSOLUTE=&quot;$PROJECT_BINARY_DIR/$OBJECT_FILE&quot;

cd &quot;$PROJECT_SOURCE_DIR&quot;

# invoke compiler
exec $COMPILER_AND_FLAGS -c &quot;${SOURCE_FILE_RELATIVE}&quot; -o &quot;${OBJECT_FILE_ABSOLUTE}&quot;</code></pre></figure>

<p>通过 <code>CONFIGURE_FILE()</code> 将文件中的变量替换，然后在 <code>set_target_properties()</code> 设置，将在编译之前将绝对路径转换为相对路径，注意 <code>gcc_debug_fix.sh.in</code> 需要为可以执行文件。</p>

<h3 id="库参数">库参数</h3>

<p>在编译不同的库时，可能需要使用不同的编译参数，那么此时就可以使用如下的方式修改。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">ADD_LIBRARY(unity unity/src/unity.c)

# Disable -Werror for Unity
IF (FLAG_SUPPORTED_Werror)
	IF (&quot;${CMAKE_VERSION}&quot; VERSION_LESS &quot;2.8.12&quot;)
        SET(CMAKE_C_FLAGS &quot;${CMAKE_C_FLAGS} -Wno-error&quot;)
    ELSE()
        TARGET_COMPILE_OPTIONS(unity PRIVATE &quot;-Wno-error&quot;)
    ENDIF()
ENDIF()
# Disable -fvisibility=hidden for Unity
IF (FLAG_SUPPORTED_fvisibilityhidden)
    IF (&quot;${CMAKE_VERSION}&quot; VERSION_LESS &quot;2.8.12&quot;)
        SET(CMAKE_C_FLAGS &quot;${CMAKE_C_FLAGS} -fvisibility=default&quot;)
    ELSE()
        TARGET_COMPILE_OPTIONS(unity PRIVATE &quot;-fvisibility=default&quot;)
    ENDIF()
ENDIF()
# Disable -fsanitize=float-divide-by-zero for Unity
#     (GCC bug on x86 https://gcc.gnu.org/bugzilla/show_bug.cgi?id=80097)
IF (FLAG_SUPPORTED_fsanitizefloatdividebyzero AND (CMAKE_C_COMPILER_ID STREQUAL &quot;GNU&quot;))
    IF (&quot;${CMAKE_VERSION}&quot; VERSION_LESS &quot;2.8.12&quot;)
        SET(CMAKE_C_FLAGS &quot;${CMAKE_C_FLAGS} -fno-sanitize=float-divide-by-zero&quot;)
    ELSE()
        TARGET_COMPILE_OPTIONS(unity PRIVATE &quot;-fno-sanitize=float-divide-by-zero&quot;)
    ENDIF()
ENDIF()</code></pre></figure>

<h3 id="添加-flex-bison">添加 flex bison</h3>

<p>默认是不支持 flex 和 bison 的，可以通过如下方式添加。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">#----- 生成的中间文件保存在${CMAKE_CURRENT_BINARY_DIR}目录下
include_directories(${CMAKE_CURRENT_BINARY_DIR} )

#----- 定义源码目录以及中间文件
SET(PARSER_DIR ${CMAKE_SOURCE_DIR}/driver/mysql)
SET(GEN_SOURCES
	${CMAKE_CURRENT_BINARY_DIR}/lex.yy.c
	${CMAKE_CURRENT_BINARY_DIR}/parser.tab.c
	${CMAKE_CURRENT_BINARY_DIR}/parser.tab.h
	${CMAKE_CURRENT_BINARY_DIR}/parser.l.h
)

#----- 添加一个custom_target用于构建依赖，该target依赖${GEN_SOURCES}指向的文件
ADD_CUSTOM_TARGET(
        GenServerSource
        DEPENDS ${GEN_SOURCES}
)

#----- 告知${GEN_SOURCES}指向的文件是编译过程中生成的，以避免执行cmake命令的时候报文件找不到
SET_SOURCE_FILES_PROPERTIES(${GEN_SOURCES} GENERATED)

#----- 需要注意的是OUTPUTS一定要和${GEN_SOURCES}中文件一致，并且target设置对否则无法确保执行顺序
ADD_CUSTOM_COMMAND(
	SOURCE ${PARSER_DIR}/parser.y
	COMMAND bison -d ${PARSER_DIR}/parser.y
	TARGET GenServerSource
	OUTPUTS ${CMAKE_CURRENT_BINARY_DIR}/parser.tab.c ${CMAKE_CURRENT_BINARY_DIR}/parser.tab.h
	WORKING_DIRECTORY ${PARSER_DIR}
)
ADD_CUSTOM_COMMAND(
	SOURCE ${PARSER_DIR}/parser.l
	COMMAND flex  ${PARSER_DIR}/parser.l
	TARGET GenServerSource
	OUTPUTS ${CMAKE_CURRENT_BINARY_DIR}/lex.yy.c ${CMAKE_CURRENT_BINARY_DIR}/parser.l.h
	WORKING_DIRECTORY ${PARSER_DIR}
)

#----- 这里将flex和bison生成的.c文件编译到程序的动态库中，需要注意指定路径
add_library(driver SHARED
	sourcefile1.cc sourcefile2.cc sourcefile3.cc
	${CMAKE_CURRENT_BINARY_DIR}/lex.yy.c
	${CMAKE_CURRENT_BINARY_DIR}/parser.tab.c
)

#----- 指明动态库driver所需要的依赖，所以可以保证cmake会先生成GenServerSource, 而GenServerSource又
#      依赖${GEN_SOURCES}指明的文件， 而这些文件又是由两个ADD_CUSTOM_COMMAND命令来生成的
#      (outputs中给出的)，所以会先执行两个ADD_CUSTOM_COMMAND命令
ADD_DEPENDENCIES(driver GenServerSource)</code></pre></figure>

<h3 id="库使用">库使用</h3>

<p>关于库的使用常见有如下的操作。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">----- 增加库的搜索路径
LINK_DIRECTORIES(./lib)

----- 生成库，可以是动态(SHARED)或者静态库(STATIC)
ADD_LIBRARY(hello SHARED ${SRC_LIST})

----- 指定生成对象时依赖的库
TARGET_LINK_LIBRARIES(hello A B.a C.so)

----- 自定义链接选项，单独对B.a使用--whole-archive选项
TARGET_LINK_LIBRARYIES(hello A -Wl,--whole-archive B.a -Wl,--no-whole-archive C.so)</code></pre></figure>

<p>在使用 <code>add_library(foo SHARED foo.c)</code> 时，不同平台输出有所区别，例如，<code>foo.dll(Windows)</code>、 <code>libfoo.so(Linux)</code>、 <code>libfoo.dylib(Mac)</code> 。</p>

<p>比如编写用于 lua 扩展的 C 模块，那么在进行 require 时，需要执行如下调用：</p>

<figure class="highlight"><pre><code class="language-lua" data-lang="lua"><span class="nb">require</span> <span class="s1">&#39;</span><span class="s">libfoo&#39;</span>     <span class="c1">--默认加载libfoo.[so|dll]，并且执行luaopen_libluafoo</span>
<span class="nb">require</span> <span class="s1">&#39;</span><span class="s">foo&#39;</span>        <span class="c1">--加载foo.so,并且执行luaopen_luafoo</span></code></pre></figure>

<p>并且各个平台下各不相同，可以通过如下方式修改前缀以及后缀：</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">SET_TARGET_PROPERTIES(foo PROPERTIES PREFIX &quot;&quot;)
SET_TARGET_PROPERTIES(foo PROPERTIES SUFFIX &quot;so&quot;)</code></pre></figure>

<!--
 对了，吐槽一下mac的rpath也是件麻烦的事情


# enable @rpath in the install name for any shared library being built
set(CMAKE_MACOSX_RPATH 1)

# the install RPATH for bar to find foo in the install tree.
# if the install RPATH is not provided, the install bar will have none
set_target_properties(bar PROPERTIES INSTALL_RPATH "@loader_path/../lib")
-->

<h3 id="文件路径">文件路径</h3>

<p>CMake 在编译时会使用到绝对路径，而在打印日志时可能会导致文件长度过大，有几种方式修改。</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="cp">#include &lt;string.h&gt;</span>
<span class="cp">#define __FILENAME__                             \</span>
<span class="cp">        (strrchr(__FILE__, &#39;/&#39;) ?                \</span>
<span class="cp">	strrchr(__FILE__, &#39;/&#39;) + 1 : __FILE__)</span></code></pre></figure>

<p>不过这种方式会在执行时计算，也可以使用如下宏定义，此时会使用相对路径。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">SET(CMAKE_C_FLAGS         &quot;${CMAKE_C_FLAGS} -D__FILENAME__=&#39;\&quot;$(subst ${CMAKE_SOURCE_DIR}/,,$(abspath $&lt;))\&quot;&#39;&quot;)</code></pre></figure>

<p>或者只使用文件名。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">SET(CMAKE_C_FLAGS         &quot;${CMAKE_C_FLAGS} -D__FILENAME__=&#39;\&quot;$(notdir $(abspath $&lt;))\&quot;&#39;&quot;)</code></pre></figure>

<h3 id="常用命令">常用命令</h3>

<p>指令是大小写无关的，参数和变量是大小写相关的，参数使用空格或者分号隔开。如 <code>MESSAGE (STATUS "This is BINARY dir" ${HELLO_BINARY_DIR})</code> 和 <code>MESSAGE (STATUS "This is BINARY dir ${HELLO_BINARY_DIR}")</code> 相同。</p>

<p>变量使用 <code>${}</code> 方式取值，但是在 <code>IF</code> 控制语句中是直接使用变量名。</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">PROJECT (projectname [CXX] [C] [Java])
  定义工程名称以及语言，会隐式定义 projectname_BINARY_DIR、projectname_SOURCE_DIR变量，
  同时也会定义 PROJECT_BINARY_DIR、PROJECT_SOURCE_DIR 与前两者相同，建议使用后者。

SET(VAR [VALUE] [CACHE TYPE DOCSTRING [FORCE]])
  可以用来显式的定义变量。

MESSAGE([SEND_ERROR | STATUS | FATAL_ERROR] &quot;message to display&quot; ...)
  向终端输出用户定义的信息，SEND_ERROR(产生错误，生成过程被跳过)，SATUS(输出前缀为-的信息)、
  FATAL_ERROR(立即终止所有cmake过程)。

ADD_DEFINITIONS(-DMICRO_1 ...)
  添加宏定义。

ADD_EXECUTABLE(hello ${SRC_LIST})
  该工程会生成一个文件名为 hello 的可执行文件，相关的源文件是 SRC_LIST 。

ADD_SUBDIRECTORY(source_dir [binary_dir] [EXCLUDE_FROM_ALL])
  指定当前工程的

CONFIGURE_FILE(intput output [COPYONLY] [ESCAPE_QUOTES] [@ONLY])
  将文件 input 拷贝到 output 然后替换文件内容中引用到的变量值；如果用相对路径，则 input 相对
  的是当前源码路径，output 相对于二进制文件路径。该命令替换掉在输入文件中，以 ${VAR} 格式或
  @VAR@ 格式引用的任意变量，如同它们的值是由CMake确定的一样。 如果一个变量还未定义，它会被替
  换为空。如果指定了COPYONLY选项，那么变量就不会展开。如果指定了ESCAPE_QUOTES选项，那么所有被
  替换的变量将会按照C语言的规则被转义。该文件将会以CMake变量的当前值被配置。

----- 查看当前支持的选项
cmake .. -LH</code></pre></figure>

<h2 id="参考">参考</h2>

<p>关于 CMake 相关的文档可以参考 <a href="/reference/linux/CMake_Practice.pdf">CMake 实践</a> ，或者参考 <a href="http://hahack.com/codes/cmake/">CMake 入门实战</a> 以及 <a href="https://cmake.org/cmake-tutorial/">CMake Tutorial</a>；搭建 GTest 环境可以参考 <a href="http://kaizou.org/2014/11/gtest-cmake/">Unit testing with GoogleTest and CMake</a> 。</p>

<p>常见的命令参考 <a href="https://cmake.org/cmake/help/v3.0/manual/cmake-commands.7.html">cmake-commands</a> 。</p>

<!--
The new guide of the conversation in Autoconf and Make
http://www.edwardrosten.com/code/autoconf/

A tutorial for porting to autoconf & automake
http://mij.oltrelinux.com/devel/autoconf-automake/

运用Autoconf和Automake生成Makefile的学习之路
http://www.cnblogs.com/ericdream/archive/2011/12/09/2282359.html

如何根据configure.ac和Makefile.am为开源代码产生当前平台的Makefile
http://www.51cos.com/?p=1649

Colletcd的编译系统介绍
https://collectd.org/wiki/index.php/Build_system

AC_CHECK_FUNCS
AC_CHECK_LIB
https://autotools.io/autoconf/finding.html
概念：GNU构建系统和Autotool
http://www.pchou.info/linux/2016/09/16/gnu-build-system-1.html

CMake如何查找链接库
http://www.yeolar.com/note/2014/12/16/cmake-how-to-find-libraries/


http://huqunxing.site/2016/08/26/CMake%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/#编译32位和64位程序

CPACK_GENERATOR RPM TBZ2 ZIP

cpack -D CPACK_GENERATOR="ZIP;TGZ" /path/to/build/tree

 AC_PLUGIN([cpu],                 [$plugin_cpu],             [CPU usage statistics])


http://cmake.3232098.n2.nabble.com/Adding-a-custom-line-to-CMake-s-makefiles-td5984979.html


%defattr(file mode, user, group, dir mode)

默认的是 `%defattr(644, user, group, 755)` 或者 `%defattr(-, user, group)` ，对于普通文件是 644 而可执行文件以及目录使用 755 。
-->


  <hr>
  <nav>
    <ul class="pager">
         <li class="previous"><a href="/post/mysql-variables_init.html" title="MySQL 变量相关">&larr; Older</a></li> 
         <li class="next"><a href="/post/linux-program-structure-trees.html" title="数据结构 -- Tree">Newer &rarr;</a></li> 
    </ul>
  </nav><br>
<!--
  <hr><div id="section-donate"><span>赏</span></div><br>
  <p style="text-indent:0px;text-align:center;">如果喜欢这里的文章，而且又不差钱的话，欢迎打赏个早餐 ^_^</p><br>
  <div class="row" style="text-align:center;" >
    <div class="col-md-6"><img src="/images/system/barcode-pay-alipay.jpg" style="width:150px;height:150px;" title="支付宝捐赠" /><br>支付宝打赏</div>
    <div class="col-md-6"><img src="/images/system/barcode-pay-wechat.jpg" style="width:150px;height:150px;" title="微信捐赠" /><br>微信打赏</div>
  </div><br><hr>
-->
  <p style="text-indent:0px;text-align:center;">如果喜欢这里的文章，而且又不差钱的话，欢迎打赏个早餐 ^_^</p>
  <div id="donate_module">
    <style type="text/css">
      .donate_bar a.btn_donate{
        display: inline-block;
        position:      relative;
        text-align:    center;
        width: 82px;
        height: 82px;
        background: url("/images/misc/btn_reward.gif") no-repeat;
        _background: url("/images/misc/btn_reward.gif") no-repeat;
        -webkit-transition: background 0s;
        -moz-transition: background 0s;
        -o-transition: background 0s;
        -ms-transition: background 0s;
        transition: background 0s;
      }
      .donate_bar a.btn_donate:hover{ background-position: 0px -82px;}
      .donate_bar .donate_txt {
        display: block;
        color: #9d9d9d;
        font: 14px/2 "Microsoft Yahei";
      }
    </style>
    <div id="donate_board" class="donate_bar row" style="text-align:center;" >
      <a id="btn_donate" class="btn_donate" target="_self" href="javascript:;" title="Donate 打赏"></a>
    </div>
    <div id="donate_guide" class="donate_bar center hidden">
      <div class="row" style="text-align:center;" >
        <div class="col-md-6"><img src="/images/system/barcode-pay-alipay.jpg" style="width:150px;height:150px;" title="支付宝捐赠" /><br>支付宝打赏</div>
        <div class="col-md-6"><img src="/images/system/barcode-pay-wechat.jpg" style="width:150px;height:150px;" title="微信捐赠" /><br>微信打赏</div>
      </div>
    </div>
    <script type="text/javascript">
      document.getElementById('btn_donate').onclick = function(){
        $('#donate_board').addClass('hidden');
        $('#donate_guide').removeClass('hidden');
      }
      function donate_on_web(){
        $('#donate').submit();
      }
    </script>
  </div>

  <hr>

  <div id="gitmentContainer"></div>
  <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
  <script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
  <script>
  var gitment = new Gitment({
      id: '1447344000',
      owner: 'Jin-Yang',
      repo: 'jin-yang.github.com',
      oauth: {
          client_id: '6d89d48ce689192bf95d',
          client_secret: 'c9a720aafb8e3084e3feb46cadee80b03cdc792f',
      },
  });
  gitment.render('gitmentContainer');
  </script>

  <!-- 多说评论框 start -->
  <!--<div class="ds-thread" data-thread-key="请将此处替换成文章在你的站点中的ID" data-title="请替换成文章的标题" data-url="请替换成文章的网址"></div>-->
  <!--
  <div class="ds-thread" data-thread-key="/post/linux-cmake-auto-compile-introduce.html" data-title="CMake 自动编译" data-url="/post/linux-cmake-auto-compile-introduce.html"></div>
  -->
  <!-- 多说评论框 end -->
  <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
  <!--
  <script type="text/javascript">
      var duoshuoQuery = {short_name:"jinyangposts"};
      (function() {
          var ds = document.createElement('script');
          ds.type = 'text/javascript';ds.async = true;
          ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
          ds.charset = 'UTF-8';
          (document.getElementsByTagName('head')[0]
           || document.getElementsByTagName('body')[0]).appendChild(ds);
      })();
  </script>
  -->
  <!-- 多说公共JS代码 end -->
</div>

    </div>
    <div class="col-lg-3 visible-lg blog-sidebar">
    <center><a href="/"><img src="/images/system/linux-liberty.png" width="200" /></a></center>
<h2>About This Blog</h2>
<div class="sidebar-module">
<p style="text-indent:0em;margin:0px;padding:0px;">This is a personal weblog ^_^ generated with Jekyll, if you like it or have some questions,
just feel free to contact me :)</p>
</div><!-- end of "node" "about" -->



<h2>Recent Posts</h2>
<div class="list-group">
  
    <a class="list-group-item" href="/post/linux-program-cpu-cache-introduce_init.html">CPU Cache</a>
  
    <a class="list-group-item" href="/post/artificial-intelligence-decision-tree-introduce.html">决策树</a>
  
    <a class="list-group-item" href="/post/linux-ebpf-bcc-tools-introduce.html">BCC 工具使用</a>
  
    <a class="list-group-item" href="/post/linux-ebpf-basic-usage-introduce.html">eBPF 简介</a>
  
    <a class="list-group-item" href="/post/math-monte-carlo-sample-introduce.html">采样算法</a>
  
</div>

<h2>Categories</h2>
<ul class="list-group" style="margin:0px;">
  
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#bash"> bash</a>
    <span class="badge">2</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#database"> database</a>
    <span class="badge">86</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#golang"> golang</a>
    <span class="badge">28</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#linux"> linux</a>
    <span class="badge">301</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#misc"> misc</a>
    <span class="badge">244</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#mysql"> mysql</a>
    <span class="badge">79</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#network"> network</a>
    <span class="badge">49</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#postgresql"> postgresql</a>
    <span class="badge">4</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#program"> program</a>
    <span class="badge">138</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#python"> python</a>
    <span class="badge">25</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#react"> react</a>
    <span class="badge">1</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#rtems"> rtems</a>
    <span class="badge">1</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#sql"> sql</a>
    <span class="badge">10</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#tools"> tools</a>
    <span class="badge">1</span>
  </li>
  
    <li style="margin-left:0em" class="list-group-item"><a href="/categories.html#webserver"> webserver</a>
    <span class="badge">25</span>
  </li>
  
</ul><!-- end of "node" "categories" -->

<h2>Related Links</h2>
<ul class="list-group" style="margin:0px">
  <li style="margin-left:0em" class="list-group-item">
    <div class="row">
      <div class="col-xs-4">
       <a href="http://www.rtems.org" title="To RTEMS"><img class="img-thumbnail img-responsive" src="/images/system/rtems.png"  alt="RTEMS"/></a>
      </div>
      <div class="col-xs-8 center-block" style="padding:0px;">
        <strong>RTEMS</strong><br>
        <div class="sidebar-description">Real-Time Executive for Multiprocessor System</div>
      </div>
    </div>
  </li>
  <li style="margin-left:0em" class="list-group-item">
    <div class="row">
      <div class="col-xs-4">
       <a href="http://www.gnu.org" title="To GNU">
       <img class="img-thumbnail img-responsive" src="/images/system/gnu.jpg" alt="GNU" /></a>
      </div>
      <div class="col-xs-8 center-block" style="padding:0px;">
        <strong>GNU</strong><br>
        <div class="sidebar-description">A Unix-linux Operating System</div>
      </div>
    </div>
  </li>
  <li style="margin-left:0em" class="list-group-item">
    <div class="row">
      <div class="col-xs-4">
    <a href="http://www.kernel.org" title="To Linux Kernel">
    <img class="img-thumbnail img-responsive" src="/images/system/linux.png"  alt="LINUX" /></a>
      </div>
      <div class="col-xs-8 center-block" style="padding:0px;">
        <strong>Linux Kernel</strong><br>
        <div class="sidebar-description">Maintained by Linux Kernel Organization</div>
      </div>
    </div>
  </li>
  <li style="margin-left:0em" class="list-group-item">
    <div class="row">
      <div class="col-xs-4">
    <a href="http://arduino.cc" title="To Arduino">
    <img class="img-thumbnail img-responsive" src="/images/system/arduino.png"  alt="ARDUINO" /></a>
      </div>
      <div class="col-xs-8 center-block" style="padding:0px;">
        <strong>Arduino</strong><br>
        <div class="sidebar-description">Open-source Electronic Prototyping Platform</div>
      </div>
    </div>
  </li>
</ul>

<h2>Search</h2>
<div class="sidebar-module">
  <form class="search" method="GET" action="https://www.google.com.hk/search">
    <input type="text" name="q" class="search-query" placeholder=" Search on Google">
    <input type="hidden" name="ie" value="utf-8">
    <input type="submit" name="sa" value="Search" />
  </form><br>
  <input type="text" class="search-field" placeholder=" Search This Site">
  <div class="search-results"></div>
</div>



    </div>
  </div>
<hr><p class="text-center">This Site was built by Jin Yang, generated with Jekyll, and hosted on GitHub Pages<br/> &copy;2013-2019 &ndash; Jin Yang</p><div class="footer-logo"></div>

</div>
</body>
</html>
